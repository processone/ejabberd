\documentclass[a4paper,10pt]{article}

%% Packages
\usepackage{epsfig}
\usepackage{fancyhdr}
\usepackage{graphics}
\usepackage{hevea}
\usepackage[pdftex,colorlinks,unicode,urlcolor=blue,linkcolor=blue,pdftitle=Ejabberd\
        Feature\ Sheet,pdfauthor=Sander\
        Devrieze,pdfsubject=ejabberd,pdfkeywords=ejabberd]{hyperref}
\usepackage{verbatim}
\usepackage{color}

%% Index
% Remove the index anchors from the HTML version to save size and bandwith.
\newcommand{\ind}[1]{\begin{latexonly}\index{#1}\end{latexonly}}

%% Images
\newcommand{\logoscale}{0.7}
\newcommand{\imgscale}{0.58}
\newcommand{\insimg}[1]{\insscaleimg{\imgscale}{#1}}
\newcommand{\insscaleimg}[2]{
  \imgsrc{#2}{}
  \begin{latexonly}
    \scalebox{#1}{\includegraphics{#2}}
  \end{latexonly}
}

%% Various
\newcommand{\bracehack}{\def\{{\char"7B}\def\}{\char"7D}}
\newcommand{\titem}[1]{\item[\bracehack\texttt{#1}]}
\newcommand{\ns}[1]{\texttt{#1}}
\newcommand{\jid}[1]{\texttt{#1}}
\newcommand{\option}[1]{\texttt{#1}}
\newcommand{\poption}[1]{{\bracehack\texttt{#1}}}
\newcommand{\node}[1]{\texttt{#1}}
\newcommand{\term}[1]{\texttt{#1}}
\newcommand{\shell}[1]{\texttt{#1}}
\newcommand{\ejabberd}{\texttt{ejabberd}}
\newcommand{\Jabber}{Jabber}

%% Title page
\include{version}
\title{Ejabberd \version\ Feature Sheet}
\author{Sander Devrieze \\
  \ahrefurl{mailto:s.devrieze@pandora.be} \\
  \ahrefurl{xmpp:sander@devrieze.dyndns.org}}

% Options
\newcommand{\marking}[1]{\textbf{\begin{large}\textcolor{ejblue}{#1}\end{large}}} % Marking enabled
\newcommand{\quoting}[2][yozhik]{\begin{quotation}\textcolor{#1}{\textit{#2}}\end{quotation}} % Quotes enabled
\newcommand{\new}{\marginpar{\textcolor{red}{\textsc{new}}}} % Highlight new features
\newcommand{\improved}{\marginpar{\textcolor{orange}{\textsc{improved}}}} % Highlight improved features
\setcounter{secnumdepth}{-1} % Disable section numbering

%% To by-pass errors in the HTML version.
\newstyle{SPAN}{width:20\%; float:right; text-align:left; margin-left:auto;}
\definecolor{orange}       {cmyk}{0.000,0.333,1.000,0.000}

%% Footnotes
\begin{latexonly}
\global\parskip=9pt plus 3pt minus 1pt
\global\parindent=0pt
\gdef\ahrefurl#1{\href{#1}{\texttt{#1}}}
\gdef\footahref#1#2{#2\footnote{\href{#1}{\texttt{#1}}}}
\end{latexonly}
\newcommand{\txepref}[2]{\footahref{http://www.xmpp.org/extensions/xep-#1.html}{#2}}
\newcommand{\xepref}[1]{\txepref{#1}{XEP-#1}}

%% Fancy header
\fancyhf{}
\pagestyle{fancy}
\rhead{\textcolor{ejblue}{The Expandable Jabber/XMPP Daemon.}}
\renewcommand{\headrule}{{\color{ejblue}%
\hrule width\headwidth height\headrulewidth \vskip-\headrulewidth}}
\lhead{\setlength{\unitlength}{-6mm}
  \begin{picture}(0,0)
    \put(5.8,3.25){\includegraphics[width=1.3\textwidth]{yozhikheader.png}}
  \end{picture}}

% Official ejabberd colours
\definecolor{ejblue}       {cmyk}{1.000,0.831,0.000,0.537} %RGB: 0,0,118	HTML: 000076
\definecolor{ejgreenyellow}{cmyk}{0.079,0.000,0.275,0.102} %RGB: 209,229,159	HTML: d1e59f
\definecolor{ejgreendark}  {cmyk}{0.131,0.000,0.146,0.220} %RGB: 166,199,162	HTML: a6c7a2
\definecolor{ejgreen}      {cmyk}{0.077,0.000,0.081,0.078} %RGB: 216,236,215	HTML: d8ecd7
\definecolor{ejgreenwhite} {cmyk}{0.044,0.000,0.048,0.020} %RGB: 239,250,238	HTML: effaee
\definecolor{yozhik}       {cmyk}{0.000,0.837,1.000,0.424} %RGB: 147,0,0	HTML: 930000

\begin{document}

\label{titlepage}
\begin{titlepage}
  \maketitle{}

  \thispagestyle{empty}

  \begin{center}
  {\insscaleimg{\logoscale}{logo.png}
    \par
  }
  \end{center}
  \quoting{I can thoroughly recommend ejabberd for ease of setup --
  Kevin Smith, Current maintainer of the Psi project}

\end{titlepage}

\newpage
% Set the page counter to 2 so that the titlepage and the second page do not
% have the same page number. This fixes the PDFLaTeX warning "destination with
% the same identifier".
\begin{latexonly}
\setcounter{page}{2}
\pagecolor{ejgreenwhite}
\end{latexonly}

% Input introduction.tex
\input{introduction}

\end{document}

%% TODO
% * illustrations (e.g. screenshot from web interface)
% * commented parts
% * slides, guide and html version
% * cleaning and improving LaTeX code
% * key features: something like this (shorter)? (more focussed on Erlang now): "To reach the goal of high
%   availability, performance and clustering, ejabberd is written in Erlang, a programming language perfectly
%   suited for this. Besides that, some parts are written in C to also incude the advantages of this language. In
%   short, ejabberd is a perfect mix of mainly Erlang code, peppered with some C code to get the final touch!"
%   <picture of a cocktail>
% * key features: saying that ejabberd the only XMPP server is that can do real clustering:
%   http://www.jivesoftware.org/forums/thread.jspa?threadID=14602
%   "What I find interesting is that *no* XMPP servers truly provide clustering. This includes all the commercial
%   servers. The one partial exception appears to be ejabberd, which can cluster certain data such as sessions,
%   but not all services such as MUC."
% * try it today: links to migration tutorials
