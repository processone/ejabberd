.\\" auto-generated by docbook2man-spec $Revision: 1.1 $
.TH "TSPLOT" "1" "February 2007" "" ""
.SH NAME
tsplot \- Plot several tsung logs on the same charts, for comparison purpose.
.SH SYNOPSIS
.sp
\fBtsplot\fR [ \fB-c configuration file\fR ]  [ \fB-d images output directory\fR ]  [ \fB-v verbose\fR ]  [ \fBlegend logfile\fR ] 
.SH "DESCRIPTION"
.PP
Tsung comes with a plotting tool using
\fBgnuplot\fR, producing some graphs from the
\fItsung.log\fR file data.
\fBtsplot\fR is able to plot data from several
\fItsung.log\fR files onto the same charts serie,
for further comparison and analyze.
.SH "OPTIONS"
.PP
.TP
\fB-c\fR
.TP
\fB--config\fR
specifies the configuration file to use. Default is \fIhttp.en.plots.conf\fR.
.TP
\fB-d\fR
.TP
\fB--outdir\fR
directory where \fBtsplot\fR saves the images
it produces, defaults to \fI/tmp/tsung\fR.
.TP
\fB-v\fR
.TP
\fB--verbose\fR
makes \fBtsplot\fR very verbose about
what it does.
.SH "CONFIGURATION"
.PP
The configuration file of \fBtsplot\fR allows to
define the plots you want to obtain, from their label to the
data they will show. The configuration file adopts a
\fI\&.ini\fR file syntax, each section defining a
chart.
.PP
\fBtsplot\fR comes with two sample configuration
files, namely \fIhttp.plots.en.conf\fR and
\fIpgsql.plots.en.conf\fR. They respectively define
charts to be plotted for a \fBtsung\fR HTTP test
and a \fBtsung\fR PGSQL test.
.PP
A \fBDEFAULT\fR section may be provided, any
element configured here may then be overriden into a specific
plot section.
.PP
Another configuration file is used by \fBtsplot\fR:
the \fItsung/stats.conf\fR one. It's used to
define by type the statistics to be read into
\fBtsung\fR log files, and you shouldn't need to
edit it, short of adding support for new
\fBtsung\fR statistics.
.PP
Common settings, to be found into \fBDEFAULT\fR
section or any specific chart section.
.TP
\fBencoding\fR
set here the encoding used thereafter in the file, for
labels and titles.
.TP
\fBdpi\fR
dpi setting of produced charts images
.TP
\fBtn_dpi\fR
dpi setting of produced charts thumbnail images
.TP
\fBimgtype\fR
type of chart image to produce, as in
\fIpng\fR or \fIps\fR

A complete list might be obtained on the
\fBpython-matplotlib\fR website,
http://matplotlib.sourceforge.net/
.TP
\fBxlabel\fR
default label for horizontal axe, often you want seconds
or minutes, depending on xfactor.

Please note you can also set some defaults for ylabel, but
this seems not to be a good idea in practise.
.TP
\fBxfactor\fR
tsung logs statistics in its logfile every 10 seconds. By
default, charts will not scale this and have seconds as
horizontal axis units. By setting an xfactor of 60, you
have a minute precision on horizontal axis.
.TP
\fByfactor\fR
same as xfactor, but for vertical axis.

Depending on the data you obtain with your tests, you may
want to adapt the vertical scale of your plotting. For
example, the \fBpage.mean\fR statistic is
logged in milliseconds by \fBtsung\fR. You
may want to display seconds if this unit better fits your
measures. Then simply set \fByfactor =
1000\fR.
.TP
\fBstyles\fR
set here any number of \fBmatplotlib\fR
styles you want to use, separated by spaces, as available
here:
http://matplotlib.sourceforge.net/matplotlib.pylab.html#-plot.

For exemple, set \fBstyles = b- g+ r- cx\fR
for plotting first dataset (see \fBstats\fR
below) with a blue solid line, second with green plus
symbols, third with a red line and last with cyan cross
symbols.

This could fit a \fBstats = 200.count
400.count\fR stats setting when plotting two
\fBtsung\fR logs.
.PP
You then can define any number of plot, one by section, and give
them an arbitrary name. The name must be unique, and will be
used for naming output images.
.PP
.PP
Any option available in DEFAULT section is also available in any
specific chart section, with the same meaning and effect. The
specific setting will systematically override the DEFAULT one.
.PP
.TP
\fBtitle\fR
Title of the chart, as printed into the resulting image.
.TP
\fBstats\fR
The statistics properties to use for this plotting, as
named in the \fItsung/stats\fR
configuration file. Please see this bundled file for a
list of what is available.

Tsung provide several types of statistics, as documented
here:
http://tsung.erlang-projects.org/user_manual.html#htoc53. The
two main types of statistics used are
\fBsample\fR and \fBcounter\fR. A
third one is \fBgauge\fR but is only use for a
single statistic (users).

sample provides count, mean, stdvar, max, min and gmean
(global mean)
properties, and counter provides only count and
totalcount. gauge provide count and max.

The stats setting can accept several
\fBstat.property\fR elements, separated by
spaces.

Examples: \fBstats = users.count\fR to plot
the number of simultaneously connected users, and
\fBstats = 200.count 400.count\fR to plot
given HTTP return codes count, both on the same chart.

Please notice \fBtsplot\fR is currently
limited to use only one horizontal and only one vertical
scales. \fBmatplotlib\fR is able to define
some more complex drawings, but \fBtsplot\fR
is not yet able to benefit from this.
.TP
\fBlegend\fR
Legend prefix, which will be followed by the legend given
on command line.

Each plot on a chart has a legend entry, you configure
here the meaning of the plot (say 'concurrent users') and
\fBtsplot\fR will add it the name of the data
serie being plotted (say 'scenario x'). You'd obtain this
legend: 'concurrent users scenario x'.
.TP
\fBylabel\fR
label for vertical axe
.SH "CONFIGURATION EXAMPLE"
.PP
Please see the given configuration examples which should be
distributed in
\fI/usr/share/doc/tsung/tsung-plotter/http.plots.en.conf\fR
and
\fI/usr/share/doc/tsung/tsung-plotter/pgsql.plots.en.conf\fR.
.SH "BUGS"
.PP
Please reports bugs to the mailing list
<tsung-users@process-one.net> or in the bug
tracker  <URL:https://support.process-one.net/browse/TSUN>,
see also  <URL:https://lists.process-one.net/mailman/listinfo/tsung-users> for
archives.
.SH "AUTHORS"
.PP
\fBtsplot\fR is written by Dimitri Fontaine 
<dim@tapoueh.org>.
